<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Th∆∞ vi·ªán tr·ª±c tuy·∫øn</title>
    <style>
        body { font-family: Arial; background: #e9f0ff; padding: 20px; }
        h1 { text-align: center; color: #0056d6; margin-bottom: 20px; }
        .top { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; padding: 10px; background: white; border-radius: 10px; width: fit-content; margin-left: auto; margin-right: auto; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        select, button, input { padding: 8px 12px; border-radius: 6px; border: 1px solid #ccc; font-size: 14px; }
        #btnAdd { background: #28a745; color: white; border: none; }
        #btnAdd:hover { background: #218838; }
        .filter-box { width: 100%; display: flex; justify-content: space-between; margin-bottom: 15px; }
        table { width: 100%; border-collapse: collapse; background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        th { background: #0056d6; color: white; padding: 12px; font-size: 15px; }
        td { padding: 10px; border-bottom: 1px solid #ddd; }
        tr:nth-child(even) { background: #f4f8ff; }
        .admin-btn, .view-btn { padding: 6px 10px; border: none; border-radius: 6px; color: white; cursor: pointer; }
        .edit { background: #ff9800; }
        .edit:hover { background: #e68900; }
        .delete { background: #d9534f; }
        .delete:hover { background: #c9302c; }
        .view-btn { background: #007bff; }
        .view-btn:hover { background: #0069d9; }
        #cartBox { margin-top: 30px; }
        #total { font-size: 18px; font-weight: bold; color: darkred; padding: 10px; }
        #buyCart { background:#28a745;color:white;border:none;padding:8px 12px;border-radius:6px;cursor:pointer; margin-top:10px; }
    </style>
</head>
<body>
<h1> TH∆Ø VI·ªÜN TR·ª∞C TUY·∫æN</h1>
<div class="top">
    <label>Vai tr√≤:</label>
    <select id="role">
        <option value="user">User</option>
        <option value="admin">Admin</option>
    </select>
    <button id="btnAdd" style="display:none;">+ Th√™m s√°ch</button>
</div>
<div class="filter-box">
    <input type="text" id="search" placeholder=" T√¨m s√°ch theo t√™n...">
    <select id="sortPrice">
        <option value="none">L·ªçc theo gi√°</option>
        <option value="asc">Gi√° th·∫•p ‚Üí cao</option>
        <option value="desc">Gi√° cao ‚Üí th·∫•p</option>
    </select>
</div>
<table>
    <thead>
    <tr>
        <th>Ti√™u ƒë·ªÅ</th>
        <th>T√°c gi·∫£</th>
        <th>Gi√°</th>
        <th>H√†nh ƒë·ªông</th>
    </tr>
    </thead>
    <tbody id="bookTable"></tbody>
</table>
<div id="cartBox">
    <h2> Gi·ªè h√†ng</h2>
    <table>
        <thead>
        <tr>
            <th>T√™n s√°ch</th>
            <th>Gi√°</th>
            <th>X√≥a</th>
        </tr>
        </thead>
        <tbody id="cartList"></tbody>
    </table>
    <p id="total">T·ªïng ti·ªÅn: 0ƒë</p>
    <button id="buyCart"> Mua t·∫•t c·∫£ s√°ch trong gi·ªè</button>
</div>
<script>
    let books = [
        { id: 1, title: "HTML & CSS C∆° B·∫£n", author: "CodeGym", price: 50000, desc: "Nh·∫≠p m√¥n giao di·ªán web." },
        { id: 2, title: "JavaScript C∆° B·∫£n", author: "Nguy·ªÖn VƒÉn A", price: 65000, desc: "Bi·∫øn, h√†m, ƒëi·ªÅu ki·ªán, v√≤ng l·∫∑p." },
        { id: 3, title: "L·∫≠p Tr√¨nh Web Cho Ng∆∞·ªùi M·ªõi", author: "CodeGym", price: 70000, desc: "Ki·∫øn th·ª©c n·ªÅn t·∫£ng Web." },
        { id: 4, title: "HTML5 N√¢ng Cao", author: "L√™ Minh", price: 55000, desc: "Th·∫ª semantic, API m·ªõi." },
        { id: 5, title: "CSS Flexbox & Grid", author: "Tr·∫ßn Nam", price: 60000, desc: "B·ªë c·ª•c web hi·ªán ƒë·∫°i." },
        { id: 6, title: "JavaScript DOM", author: "Nguy·ªÖn T√≠n", price: 80000, desc: "Thao t√°c DOM, s·ª± ki·ªán." },
        { id: 7, title: "Responsive Design", author: "Ph·∫°m B√¨nh", price: 75000, desc: "T·ªëi ∆∞u cho mobile." },
        { id: 8, title: "jQuery C∆° B·∫£n", author: "V≈© ƒê√¨nh", price: 50000, desc: "Th∆∞ vi·ªán JavaScript ph·ªï bi·∫øn." },
        { id: 9, title: "Bootstrap 5", author: "H·ªØu ƒê·ª©c", price: 90000, desc: "T·∫°o giao di·ªán nhanh ch√≥ng." },
        { id: 10, title: "Web Full-Stack C∆° B·∫£n", author: "CodeGym", price: 120000, desc: "Frontend + Backend + DB." },
        { id: 11, title: "Git & GitHub", author: "Ph·∫°m Duy", price: 45000, desc: "Qu·∫£n l√Ω m√£ ngu·ªìn." },
        { id: 12, title: "T∆∞ Duy L·∫≠p Tr√¨nh", author: "Nhi·ªÅu t√°c gi·∫£", price: 85000, desc: "Gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ khi l·∫≠p tr√¨nh." }
    ];
    const tableBody = document.getElementById("bookTable");
    const roleSelect = document.getElementById("role");
    const btnAdd = document.getElementById("btnAdd");
    const searchInput = document.getElementById("search");
    const sortSelect = document.getElementById("sortPrice");
    let cart = [];
    function addToCart(id){
        let book = books.find(b => b.id===id);
        cart.push(book);
        renderCart();
    }
    function renderCart(){
        let html="", total=0;
        cart.forEach((item,i)=>{
            total+=item.price;
            html+=`<tr><td>${item.title}</td><td>${item.price.toLocaleString()}ƒë</td><td><button class="delete" onclick="removeItem(${i})">X</button></td></tr>`;
        });
        document.getElementById("cartList").innerHTML = html;
        document.getElementById("total").innerText = "T·ªïng ti·ªÅn: "+total.toLocaleString()+"ƒë";
    }
    function removeItem(index){
        cart.splice(index,1);
        renderCart();
    }
    document.getElementById("buyCart").onclick = function(){
        if(cart.length===0){ alert("Gi·ªè h√†ng tr·ªëng!"); return; }
        let name = prompt("T√™n kh√°ch h√†ng:");
        if(!name) return;
        let phone = prompt("SƒêT:");
        if(!phone) return;
        let address = prompt("ƒê·ªãa ch·ªâ giao h√†ng:");
        if(!address) return;
        let info = " H√ìA ƒê∆†N MUA S√ÅCH\n\n";
        let total=0;
        cart.forEach(b=>{
            info+=`üìò ${b.title} - ${b.price.toLocaleString()}ƒë\n`;
            total+=b.price;
        });
        info+=`\nT·ªïng ti·ªÅn: ${total.toLocaleString()}ƒë\n\n`;
        info+=`üë§ Kh√°ch h√†ng: ${name}\nüìû ${phone}\nüìç ${address}\n\nC·∫£m ∆°n b·∫°n! ‚ù§Ô∏è`;
        alert(info);
        cart = [];
        renderCart();
    }
    function viewBook(id){
        const b = books.find(x=>x.id===id);
        alert(`üìò ${b.title}\nT√°c gi·∫£: ${b.author}\nGi√°: ${b.price.toLocaleString()}ƒë\n\nM√¥ t·∫£:\n${b.desc}`);
    }
    function buyBook(id){
        const b = books.find(x=>x.id===id);
        let name = prompt("T√™n kh√°ch:");
        if(!name)return;
        let phone = prompt("SƒêT:");
        if(!phone)return;
        let address = prompt("ƒê·ªãa ch·ªâ:");
        if(!address)return;
        alert(
            "üßæ H√ìA ƒê∆†N\n\n"+
            `üìò ${b.title} - ${b.price.toLocaleString()}ƒë\n`+
            `üë§ ${name}\nüìû ${phone}\nüìç ${address}\nC·∫£m ∆°n b·∫°n     `
        );
    }
    function renderTable(){
        let keyword=searchInput.value.toLowerCase();
        let filtered = books.filter(b=>b.title.toLowerCase().includes(keyword));
        if(sortSelect.value==="asc") filtered.sort((a,b)=>a.price-b.price);
        if(sortSelect.value==="desc") filtered.sort((a,b)=>b.price-a.price);
        tableBody.innerHTML="";
        filtered.forEach(book=>{
            let actions="";
            if(roleSelect.value==="admin"){
                actions=`<button class="admin-btn edit" onclick="editBook(${book.id})">S·ª≠a</button>
                     <button class="admin-btn delete" onclick="deleteBook(${book.id})">X√≥a</button>`;
            }else{
                actions=`<button class="view-btn" onclick="viewBook(${book.id})">Xem</button>
                     <button class="view-btn" onclick="buyBook(${book.id})">Mua</button>
                     <button class="view-btn" onclick="addToCart(${book.id})">üõí</button>`;
            }
            tableBody.innerHTML+=`<tr><td>${book.title}</td><td>${book.author}</td><td>${book.price.toLocaleString()}ƒë</td><td>${actions}</td></tr>`;
        });
    }
    btnAdd.onclick=function(){
        let title=prompt("T√™n s√°ch:");
        if(!title)return;
        let author=prompt("T√°c gi·∫£:");
        if(!author)return;
        let price=parseInt(prompt("Gi√° s√°ch (VNƒê):"));
        if(isNaN(price))return alert("Gi√° kh√¥ng h·ª£p l·ªá!");
        let desc=prompt("M√¥ t·∫£ s√°ch:")||"";
        const id=books.length?books[books.length-1].id+1:1;
        books.push({id,title,author,price,desc});
        renderTable();
    }
    function editBook(id){
        const b=books.find(x=>x.id===id);
        let title=prompt("T√™n s√°ch:",b.title); if(!title)return;
        let author=prompt("T√°c gi·∫£:",b.author); if(!author)return;
        let price=parseInt(prompt("Gi√° (VNƒê):",b.price)); if(isNaN(price))return alert("Gi√° sai!");
        let desc=prompt("M√¥ t·∫£:",b.desc)||"";
        b.title=title;b.author=author;b.price=price;b.desc=desc;
        renderTable();
    }
    function deleteBook(id){ if(!confirm("X√≥a s√°ch n√†y?")) return; books=books.filter(b=>b.id!==id); renderTable(); }
    roleSelect.onchange=function(){ btnAdd.style.display=roleSelect.value==="admin"?"inline-block":"none"; renderTable(); }
    searchInput.oninput=renderTable; sortSelect.onchange=renderTable;
    renderTable();
</script>
</body>
</html>
